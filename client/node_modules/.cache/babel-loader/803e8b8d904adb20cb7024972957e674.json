{"ast":null,"code":"import _classCallCheck from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';// import logo from '../../media/download-11.jpg'\nimport logo from'../../media/Logo-1.PNG';import CategoryMenu from'./categoryMenu';import{startGetUser}from'../../actions/userAction';import{getProductsbyQuery}from'../../actions/productAction';import{connect}from'react-redux';var TopMenu=/*#__PURE__*/function(_React$Component){_inherits(TopMenu,_React$Component);var _super=_createSuper(TopMenu);function TopMenu(){var _this;_classCallCheck(this,TopMenu);_this=_super.call(this);_this.componentDidMount=function(){_this.props.dispatch(startGetUser());var refersh=setInterval(function(){if(_this.props.users.length){clearInterval(refersh);_this.setState({role:_this.props.users[0].role});console.log(_this.props.users[0].role);}},1000);};_this.handleLogout=function(){localStorage.removeItem('token');window.location.href='/';};_this.handleSearch=function(e){_this.setState({searchText:e.target.value});};_this.handleSubmitSearch=function(e){window.location.href=\"/search/q=\".concat(_this.state.searchText);};_this.state={role:'',searchText:''};return _this;}_createClass(TopMenu,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar navbar-expand-lg navbar-dark bg-dark\"},/*#__PURE__*/React.createElement(\"a\",{className:\"navbar-brand\",href:\"/\"},\" \",/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"\",style:{height:'80px'}})),/*#__PURE__*/React.createElement(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarSupportedContent\",\"aria-controls\":\"navbarSupportedContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"},/*#__PURE__*/React.createElement(\"span\",{className:\"navbar-toggler-icon\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"collapse navbar-collapse \",id:\"navbarSupportedContent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mt-2 ml-5  w-50 \"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control \",type:\"text\",placeholder:\"Search by product name\",\"aria-label\":\"Search\",value:this.state.searchText,onChange:this.handleSearch}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-md btn-outline-warning \",onClick:this.handleSubmitSearch},\" Search \"))),/*#__PURE__*/React.createElement(\"ul\",{className:\"navbar-nav  ml-5\"},localStorage.getItem('token')?/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-nav \"},this.state.role==='Admin'?/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown ml-3 mr-2 \"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success  dropdown-toggle\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Account\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu\"},/*#__PURE__*/React.createElement(Link,{to:\"/account\",className:\"dropdown-item\"},\" Profile \"),/*#__PURE__*/React.createElement(Link,{to:\"/products/add\",className:\"dropdown-item\"},\" Add Product \"),/*#__PURE__*/React.createElement(Link,{to:\"/orders\",className:\"dropdown-item\"},\" Orders Summary \"),/*#__PURE__*/React.createElement(Link,{to:\"/categories/list\",className:\"dropdown-item\"},\" Categories List \"),/*#__PURE__*/React.createElement(Link,{to:\"/categories/update\",className:\"dropdown-item\"},\"Add/Update Category \"),/*#__PURE__*/React.createElement(Link,{to:\"/products/list\",className:\"dropdown-item\"},\" Products Summary \"))):/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown ml-3 mr-2 \"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary  dropdown-toggle\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},\"Account\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu\"},/*#__PURE__*/React.createElement(Link,{to:\"/account\",className:\"dropdown-item\"},\" Profile \"),/*#__PURE__*/React.createElement(Link,{to:\"/orders/summary\",className:\"dropdown-item\"},\" My Orders \"))),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/cart\",className:\"nav-link navbar-brand fa fa-shopping-cart ml-3\",style:{display:this.state.role==='Admin'?'none':''}},\" Cart \")),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:this.handleLogout,className:\"nav-link navbar-brand fa fa-sign-out\"},\" SignOut\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-nav\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"nav-link navbar-brand\"},\" Signin \")),/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item active\"},/*#__PURE__*/React.createElement(Link,{to:\"/register\",className:\"nav-link navbar-brand\"},\" SignUp \"))))))),/*#__PURE__*/React.createElement(CategoryMenu,null));}}]);return TopMenu;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{users:state.users};};export default connect(mapStateToProps)(TopMenu);","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/components/home/topMenu.js"],"names":["React","Link","logo","CategoryMenu","startGetUser","getProductsbyQuery","connect","TopMenu","componentDidMount","props","dispatch","refersh","setInterval","users","length","clearInterval","setState","role","console","log","handleLogout","localStorage","removeItem","window","location","href","handleSearch","e","searchText","target","value","handleSubmitSearch","state","height","getItem","display","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n// import logo from '../../media/download-11.jpg'\r\nimport logo from '../../media/Logo-1.PNG'\r\nimport CategoryMenu from './categoryMenu'\r\nimport {startGetUser} from '../../actions/userAction'\r\nimport {getProductsbyQuery} from '../../actions/productAction'\r\n \r\nimport {connect} from 'react-redux'\r\n\r\nclass TopMenu extends React.Component{\r\n    constructor(){\r\n        super()\r\n        this.state ={\r\n            role : '',\r\n            searchText:''\r\n        }\r\n    }\r\n\r\n    componentDidMount =()=>{\r\n        this.props.dispatch(startGetUser()) \r\n        const refersh =  setInterval( () =>{  \r\n            if(this.props.users.length ) {             \r\n                clearInterval(refersh)\r\n                this.setState({role :this.props.users[0].role})\r\n                console.log(this.props.users[0].role)\r\n            }\r\n        },1000)\r\n    }\r\n\r\n     handleLogout = () =>{\r\n        localStorage.removeItem('token')\r\n         window.location.href ='/'\r\n      }\r\n\r\n      handleSearch =(e) =>{\r\n          this.setState ({searchText : e.target.value})\r\n      }\r\n\r\n     handleSubmitSearch = (e) =>{\r\n        window.location.href = `/search/q=${this.state.searchText}`\r\n     }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n              <div>\r\n                <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n                    <a className=\"navbar-brand\" href=\"/\"> <img src = {logo} alt ='' style ={{height:'80px'}}/></a>\r\n                    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button>\r\n    \r\n                    <div className=\"collapse navbar-collapse \" id=\"navbarSupportedContent\">     \r\n                        <div className=\"input-group mt-2 ml-5  w-50 \">\r\n                            <input className=\"form-control \" type=\"text\" placeholder=\"Search by product name\" aria-label=\"Search\" value ={this.state.searchText}\r\n                                onChange = {this.handleSearch}/>\r\n                            <div className=\"input-group-append\">\r\n                                <button className=\"btn btn-md btn-outline-warning \" onClick = {this.handleSubmitSearch} > Search </button>\r\n                         \r\n                            </div>\r\n                        </div>\r\n    \r\n                        <ul className=\"navbar-nav  ml-5\" >\r\n                            {\r\n                                localStorage.getItem('token') ? \r\n                                    <div className ='navbar-nav '>                                      \r\n                                        {                                                \r\n                                            this.state.role ==='Admin' ?                                                \r\n                                                <div className=\"dropdown ml-3 mr-2 \">\r\n                                                    <button type=\"button\" className=\"btn btn-success  dropdown-toggle\"\r\n                                                     data-toggle=\"dropdown\"   aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                                        Account\r\n                                                    </button>\r\n                                                    <div className=\"dropdown-menu\">\r\n                                                        <Link to ='/account' className ='dropdown-item' > Profile </Link>\r\n                                                        <Link to ='/products/add' className ='dropdown-item' > Add Product </Link>\r\n                                                        <Link to ='/orders' className ='dropdown-item' > Orders Summary </Link>\r\n                                                        <Link to ='/categories/list' className ='dropdown-item' > Categories List </Link>\r\n                                                        <Link to ='/categories/update' className ='dropdown-item' >Add/Update Category </Link>\r\n                                                        <Link to ='/products/list' className ='dropdown-item' > Products Summary </Link>                                                            \r\n                                                    </div>  \r\n                                                                        \r\n                                                </div>\r\n                                            :   \r\n                                            <div className=\"dropdown ml-3 mr-2 \">\r\n                                                <button type=\"button\" className=\"btn btn-primary  dropdown-toggle\"\r\n                                                data-toggle=\"dropdown\"   aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                                    Account\r\n                                                </button>\r\n                                                <div className=\"dropdown-menu\">\r\n                                                    <Link to ='/account' className ='dropdown-item' > Profile </Link>\r\n                                                    <Link to ='/orders/summary' className ='dropdown-item' > My Orders </Link>                                                                                                        \r\n                                                </div>  \r\n                                            </div>                                               \r\n                                        }\r\n                                        <li className=\"nav-item active\">\r\n                                            <Link to ='/cart' className ='nav-link navbar-brand fa fa-shopping-cart ml-3'\r\n                                             style ={{display: this.state.role ==='Admin' ? 'none' : ''}} > Cart </Link>\r\n                                        </li>\r\n\r\n                                        <li className=\"nav-item active\">\r\n                                            <Link to ='#' onClick ={this.handleLogout} \r\n                                                className ='nav-link navbar-brand fa fa-sign-out' > SignOut</Link>\r\n                                        </li>\r\n                                       \r\n                                </div>\r\n                                :\r\n                                <div className ='navbar-nav'>\r\n                                    <li className=\"nav-item active\">\r\n                                        <Link to ='/login' className ='nav-link navbar-brand'  > Signin </Link>\r\n                                    </li>\r\n                                    <li className=\"nav-item active\">\r\n                                        <Link to ='/register' className ='nav-link navbar-brand' > SignUp </Link>\r\n                                    </li>\r\n                                   \r\n                                </div>                        \r\n                            }                         \r\n                        </ul> \r\n                    </div>\r\n                 </nav>\r\n               </div>\r\n              \r\n                <CategoryMenu/>\r\n               \r\n              \r\n            </div>\r\n          \r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return  {\r\n        users : state.users\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps)(TopMenu)"]},"metadata":{},"sourceType":"module"}