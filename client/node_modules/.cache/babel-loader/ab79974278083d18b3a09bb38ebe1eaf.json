{"ast":null,"code":"import _classCallCheck from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Jan2020_Devlopment\\\\Main projects\\\\ShopEx\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{getProductsbyID}from'../../actions/productAction';import{addProducttoCart}from'../../actions/cartAction';var ShowSingleProduct=/*#__PURE__*/function(_React$Component){_inherits(ShowSingleProduct,_React$Component);var _super=_createSuper(ShowSingleProduct);function ShowSingleProduct(){var _this;_classCallCheck(this,ShowSingleProduct);_this=_super.call(this);_this.handleCartAdd=function(){var formData={name:_this.state.products.name,price:_this.state.products.price,quantity:_this.state.quantity,image:_this.state.products.cartImage,productID:_this.state.products._id};var redirect=function redirect(){return window.location.href='/cart';};_this.props.dispatch(addProducttoCart(formData,redirect));};_this.state={products:{},path:window.location.origin,quantity:1};return _this;}_createClass(ShowSingleProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.dispatch(getProductsbyID(this.props.match.params.id));var refersh=setInterval(function(){if(_this2.props.products.length){clearInterval(refersh);var products=_this2.props.products[0];_this2.setState({products:products});}},1000);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.state.products!=={}&&this.state.products.mainImage?/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid  mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 align-self-center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(this.state.path,\"/\").concat(this.state.products.mainImage),className:\"image img mb-5\",alt:\"Image not found\",style:{height:'300px',width:'80%',marginLeft:'6%',marginRight:'auto'}}),/*#__PURE__*/React.createElement(\"br\",null),localStorage.getItem('token')?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",id:\"submit\",name:\"submit\",className:\"btn btn-warning w-100  ml-3\",value:\"ADD TO CART\",onClick:this.handleCartAdd,disabled:this.props.users[0].role==='Admin'?true:false})):/*#__PURE__*/React.createElement(\"h4\",null,\" Login or Register to order the product \")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"h2\",null,this.state.products.name),\" \",/*#__PURE__*/React.createElement(\"h6\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(\"h4\",null,\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-rupee\"}),\" \",this.state.products.price),/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:'circle',fontSize:'22px'}},this.state.products.description?this.state.products.description.split('--').map(function(text,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},text);}):'')))):'',/*#__PURE__*/React.createElement(\"br\",null));}}]);return ShowSingleProduct;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{products:state.products,users:state.users};};export default connect(mapStateToProps)(ShowSingleProduct);","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/components/items/singleItemShow.js"],"names":["React","connect","getProductsbyID","addProducttoCart","ShowSingleProduct","handleCartAdd","formData","name","state","products","price","quantity","image","cartImage","productID","_id","redirect","window","location","href","props","dispatch","path","origin","match","params","id","refersh","setInterval","length","clearInterval","setState","mainImage","height","width","marginLeft","marginRight","localStorage","getItem","users","role","listStyleType","fontSize","description","split","map","text","i","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {getProductsbyID} from'../../actions/productAction' \r\n  import {addProducttoCart} from '../../actions/cartAction'\r\nclass ShowSingleProduct extends React.Component{\r\n\r\n    constructor () {\r\n        super()\r\n        this.state = {\r\n            products: {}  ,\r\n            path : window.location.origin ,\r\n            quantity : 1\r\n                 \r\n        }\r\n    }\r\n    componentDidMount () {  \r\n             \r\n        this.props.dispatch(getProductsbyID(this.props.match.params.id ))  \r\n\r\n        const refersh =  setInterval( () =>{  \r\n            if(this.props.products.length ) {             \r\n                clearInterval(refersh)                  \r\n                const products =   this.props.products[0] \r\n                this.setState({products})\r\n            }\r\n        } , 1000)\r\n    }\r\n \r\n    handleCartAdd = () =>{\r\n        const formData = {\r\n            name : this.state.products.name,\r\n            price :this.state.products.price,\r\n            quantity: this.state.quantity,\r\n            image : this.state.products.cartImage,\r\n            productID:this.state.products._id\r\n        }\r\n        \r\n        const redirect = () =>{\r\n            return window.location.href = '/cart'            \r\n        }\r\n        \r\n        this.props.dispatch(addProducttoCart(formData,redirect))\r\n\r\n    }\r\n    render() { \r\n       \r\n         return(\r\n             <div>\r\n                 { \r\n                    this.state.products !== {} && this.state.products.mainImage?\r\n                        <div className ='container-fluid  mt-5'> \r\n                            <div className ='row'>                               \r\n                                <div className ='col-3 align-self-center'> \r\n                                    <img src = {`${this.state.path}/${this.state.products.mainImage}`} \r\n                                          className ='image img mb-5'\r\n                                        alt=\"Image not found\" style = {{ height:'300px',width:'80%',marginLeft: '6%',  marginRight: 'auto'}} />\r\n                                    <br/>\r\n                                    {\r\n                                        localStorage.getItem('token')  ?\r\n                                         <div>\r\n                                            <input type= 'submit' id='submit' name ='submit' className ='btn btn-warning w-100  ml-3' \r\n                                                value ='ADD TO CART' onClick ={this.handleCartAdd}  disabled = {this.props.users[0].role ==='Admin' ? true : false }/>  \r\n                                            \r\n                                          </div> \r\n                                          :  \r\n                                          <h4> Login or Register to order the product </h4>  \r\n                                    }\r\n                                   \r\n                                </div>\r\n\r\n                                <div className ='col'>\r\n                                    <h2>{this.state.products.name}</h2> <h6>&nbsp;</h6>\r\n                                    <h4> <span className ='fa fa-rupee'></span> {this.state.products.price}</h4> \r\n                                                                        \r\n                                     <ul style ={{listStyleType:'circle',fontSize:'22px'}}>\r\n                                        {\r\n                                            \r\n                                            this.state.products.description ?\r\n                                            this.state.products.description.split('--').map((text,i) =>{\r\n                                                return   <li key ={i}>{text}</li>  \r\n                                            }) : ''\r\n                                        }\r\n                                    </ul>\r\n                                    \r\n                                </div>\r\n                            </div>\r\n\r\n                         </div>\r\n                     :''\r\n                 }\r\n                 <br/>\r\n                 \r\n             </div>\r\n         )\r\n    }\r\n}\r\n\r\nconst mapStateToProps =(state)=>{\r\n    return {\r\n        products:state.products,\r\n        users:state.users\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShowSingleProduct)"]},"metadata":{},"sourceType":"module"}