{"ast":null,"code":"import axios from 'axios';\nexport const setUserInfo = user => {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n};\nexport const stratLogin = (userData, redirect) => {\n  console.log(userData, 'LoginAction');\n  return dispatch => {\n    axios.post('/users/login', userData).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data.error);\n      } else {\n        localStorage.setItem('token', response.data.token);\n        alert('Login SuccessFull !');\n        console.log('Token - ', localStorage.getItem('token'));\n        axios.get('users/account', {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          dispatch(setUserInfo(response.data));\n          redirect();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startRegister = (userData, redirect) => {\n  return dispatch => {\n    axios.post('/users/register', userData).then(response => {\n      if (response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\n        console.log(response.data);\n        alert(response.data.message);\n      } else {\n        alert('Registered Successfully');\n        redirect();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startGetUser = () => {\n  return dispatch => {\n    axios.get('/users/account', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      dispatch(setUserInfo(response.data));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/userAction.js"],"names":["axios","setUserInfo","user","type","payload","stratLogin","userData","redirect","console","log","dispatch","post","then","response","data","hasOwnProperty","alert","error","localStorage","setItem","token","getItem","get","headers","catch","err","startRegister","message","startGetUser"],"mappings":"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","sourcesContent":["import axios from 'axios'  \r\n\r\nexport const setUserInfo = (user) =>{\r\n    return {type: 'SET_USER' ,  payload:user}\r\n}\r\n\r\nexport const stratLogin = (userData,redirect) =>{\r\n    console.log(userData,'LoginAction')\r\n    return(dispatch) => {\r\n        axios.post('/users/login',userData)\r\n        .then(response => {\r\n            if(response.data.hasOwnProperty('error')){                \r\n                alert (response.data.error)\r\n             } else {\r\n                 localStorage.setItem('token',response.data.token)\r\n                 alert('Login SuccessFull !')\r\n                 console.log('Token - ',localStorage.getItem('token'))\r\n\r\n                 axios.get('users/account',{headers :{\r\n                     'auth':localStorage.getItem('token')\r\n                    }\r\n                 })\r\n\r\n                 .then(response =>{\r\n                     dispatch(setUserInfo(response.data))\r\n                     redirect()\r\n                 })\r\n\r\n                 .catch(err=>{\r\n                     console.log(err)\r\n                 })\r\n\r\n             }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const startRegister = (userData,redirect) =>{\r\n\r\n    return(dispatch) =>{\r\n        axios.post('/users/register',userData)\r\n        .then( response =>{\r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')){\r\n                console.log(response.data)\r\n                alert(response.data.message)\r\n            }\r\n            else {\r\n                alert('Registered Successfully')\r\n                redirect()\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const startGetUser =() =>{\r\n    return(dispatch) => {\r\n        axios.get('/users/account' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => {\r\n             dispatch( setUserInfo(response.data) )\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}