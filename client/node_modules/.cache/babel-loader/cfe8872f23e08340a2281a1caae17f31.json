{"ast":null,"code":"import axios from 'axios';\nimport swal from 'sweetalert';\nexport const setUserInfo = user => {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n};\nexport const stratLogin = (userData, redirect, refresh) => {\n  return dispatch => {\n    axios.post('/users/login', userData).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        swal({\n          title: response.data.error,\n          icon: \"error\"\n        });\n      } else {\n        localStorage.setItem('token', response.data.token);\n        swal({\n          title: 'Login Successfull !',\n          icon: \"success\"\n        });\n        console.log('Token - ', localStorage.getItem('token'));\n        axios.get('users/account', {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          dispatch(setUserInfo(response.data));\n          redirect();\n          refresh();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startRegister = (userData, redirect) => {\n  return dispatch => {\n    axios.post('/users/register', userData).then(response => {\n      if (response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\n        alert(response.data.error);\n        redirect();\n      } else {\n        alert('Registered Successfully');\n        redirect();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startGetUser = () => {\n  return dispatch => {\n    axios.get('/users/account', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      dispatch(setUserInfo(response.data));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const editUser = user => {\n  return {\n    type: 'EDIT_USER',\n    payload: user\n  };\n};\nexport const EditUserInfo = (userData, id, refresh) => {\n  console.log('Edit', userData, id);\n  return dispatch => {\n    axios.put(`/users/${id}`, userData, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      console.log(response.data);\n\n      if (response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\n        alert('Customer Data not Updated !');\n      } else {\n        const user = response.data;\n        dispatch(editUser(user));\n        refresh();\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/userAction.js"],"names":["axios","swal","setUserInfo","user","type","payload","stratLogin","userData","redirect","refresh","dispatch","post","then","response","data","hasOwnProperty","title","error","icon","localStorage","setItem","token","console","log","getItem","get","headers","catch","err","startRegister","alert","startGetUser","editUser","EditUserInfo","id","put"],"mappings":"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","sourcesContent":["import axios from 'axios'   \r\nimport swal from 'sweetalert'\r\n\r\nexport const setUserInfo = (user) =>{\r\n    return {type: 'SET_USER' ,  payload:user}\r\n}\r\n\r\nexport const stratLogin = (userData,redirect,refresh) =>{\r\n   \r\n    return(dispatch) => {\r\n        axios.post('/users/login',userData)\r\n        .then(response => {\r\n            if(response.data.hasOwnProperty('error')){                \r\n                \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\"                    \r\n                  })\r\n             } else {\r\n                 localStorage.setItem('token',response.data.token)\r\n                 swal({\r\n                    title: 'Login Successfull !',                    \r\n                    icon: \"success\" \r\n                  })\r\n                                \r\n                 console.log('Token - ',localStorage.getItem('token'))\r\n\r\n                 axios.get('users/account',{headers :{\r\n                     'auth':localStorage.getItem('token')\r\n                    }\r\n                 })\r\n\r\n                 .then(response =>{\r\n                     dispatch(setUserInfo(response.data))\r\n                     redirect()\r\n                     refresh()\r\n                 })\r\n\r\n                 .catch(err=>{\r\n                     console.log(err)\r\n                 })\r\n\r\n             }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const startRegister = (userData,redirect) =>{\r\n\r\n    return(dispatch) =>{\r\n        axios.post('/users/register',userData)\r\n        .then( response =>{\r\n            \r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')){                 \r\n                alert(response.data.error)\r\n                redirect()\r\n            }\r\n            else {\r\n                alert('Registered Successfully')\r\n                redirect()\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n \r\nexport const startGetUser =() =>{\r\n    return(dispatch) => {\r\n        axios.get('/users/account' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => {            \r\n             dispatch( setUserInfo(response.data) )\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\nexport const editUser = (user) => {\r\n    return {   type: 'EDIT_USER',   payload: user   }\r\n}\r\n\r\nexport const EditUserInfo = (userData,id,refresh) =>{\r\n    console.log('Edit',userData,id)\r\n    return(dispatch) =>{\r\n        axios.put(`/users/${id}`,userData,{\r\n            headers : {\r\n                'auth' : localStorage.getItem('token') \r\n                 }\r\n        })\r\n\r\n        .then( response =>{\r\n            console.log(response.data)\r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\r\n                alert('Customer Data not Updated !')\r\n            } else {\r\n                const user = response.data\r\n                dispatch(editUser(user))\r\n                refresh()        \r\n            }\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}