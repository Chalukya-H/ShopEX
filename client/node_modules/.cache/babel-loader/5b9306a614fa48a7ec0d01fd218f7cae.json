{"ast":null,"code":"import axios from 'axios';\nimport { getProducttoCart } from './cartAction';\nexport const setOrderSummary = orders => {\n  return {\n    type: 'SET_ORDERS',\n    payload: orders\n  };\n};\nexport const getOrderSummary = () => {\n  return dispatch => {\n    axios.get('/orders', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data.error);\n      } else {\n        dispatch(setOrderSummary(response.data));\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const addOrderInfo = order => {\n  return {\n    type: 'CREATE_ORDER',\n    payload: order\n  };\n};\nexport const addProductstoOrder = (formData, refresh) => {\n  return dispatch => {\n    axios.delete(`/cart/delete/all`, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data);\n      } else {\n        dispatch(getProducttoCart());\n        console.log();\n        axios.post('/orders', formData, {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          if (response.data.hasOwnProperty('error')) {\n            alert(response.data);\n          } else {\n            dispatch(addOrderInfo(response.data));\n            refresh();\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/orderAction.js"],"names":["axios","getProducttoCart","setOrderSummary","orders","type","payload","getOrderSummary","dispatch","get","headers","localStorage","getItem","then","response","data","hasOwnProperty","alert","error","catch","err","console","log","addOrderInfo","order","addProductstoOrder","formData","refresh","delete","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,gBAAR,QAA+B,cAA/B;AAEA,OAAO,MAAMC,eAAe,GAAIC,MAAD,IAAW;AACtC,SAAO;AAACC,IAAAA,IAAI,EAAE,YAAP;AAAuBC,IAAAA,OAAO,EAACF;AAA/B,GAAP;AACH,CAFM;AAGP,OAAO,MAAMG,eAAe,GAAE,MAAI;AAC9B,SAAOC,QAAD,IAAc;AAChBP,IAAAA,KAAK,CAACQ,GAAN,CAAU,SAAV,EAAsB;AAAGC,MAAAA,OAAO,EAAG;AAC/B,gBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADsB;AAAb,KAAtB,EAKEC,IALF,CAKOC,QAAQ,IAAI;AACd,UAAGA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,OAA7B,CAAH,EAAyC;AACtCC,QAAAA,KAAK,CAACH,QAAQ,CAACC,IAAT,CAAcG,KAAf,CAAL;AACF,OAFD,MAGG;AACAV,QAAAA,QAAQ,CAAEL,eAAe,CAACW,QAAQ,CAACC,IAAV,CAAjB,CAAR;AACH;AAEH,KAbF,EAcEI,KAdF,CAcQC,GAAG,IAAG;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAhBF;AAiBH,GAlBD;AAmBH,CApBM;AAuBP,OAAO,MAAMG,YAAY,GAAIC,KAAD,IAAU;AAClC,SAAO;AAACnB,IAAAA,IAAI,EAAE,cAAP;AAAyBC,IAAAA,OAAO,EAACkB;AAAjC,GAAP;AACH,CAFM;AAIP,OAAO,MAAMC,kBAAkB,GAAG,CAACC,QAAD,EAAYC,OAAZ,KAAuB;AACrD,SAAOnB,QAAD,IAAc;AAEhBP,IAAAA,KAAK,CAAC2B,MAAN,CAAc,kBAAd,EAAiC;AAAGlB,MAAAA,OAAO,EAAG;AAC1C,gBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADiC;AAAb,KAAjC,EAIEC,IAJF,CAIOC,QAAQ,IAAI;AACb,UAAIA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,OAA7B,CAAJ,EAA0C;AACtCC,QAAAA,KAAK,CAAEH,QAAQ,CAACC,IAAX,CAAL;AACH,OAFD,MAEO;AACLP,QAAAA,QAAQ,CAACN,gBAAgB,EAAjB,CAAR;AACAmB,QAAAA,OAAO,CAACC,GAAR;AACArB,QAAAA,KAAK,CAAC4B,IAAN,CAAW,SAAX,EAAqBH,QAArB,EAA8B;AAAGhB,UAAAA,OAAO,EAAG;AACvC,oBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAD8B;AAAb,SAA9B,EAKKC,IALL,CAKUC,QAAQ,IAAG;AACb,cAAIA,QAAQ,CAACC,IAAT,CAAcC,cAAd,CAA6B,OAA7B,CAAJ,EAA0C;AACtCC,YAAAA,KAAK,CAAEH,QAAQ,CAACC,IAAX,CAAL;AACH,WAFD,MAEO;AACFP,YAAAA,QAAQ,CAAGe,YAAY,CAACT,QAAQ,CAACC,IAAV,CAAf,CAAR;AACAY,YAAAA,OAAO;AACX;AAEJ,SAbL,EAcKR,KAdL,CAcWC,GAAG,IAAG;AACTC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,SAhBL;AAkBD;AACF,KA7BL,EA+BCD,KA/BD,CA+BOC,GAAG,IAAG;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAjCD;AAkCH,GApCD;AAqCH,CAtCM","sourcesContent":["import axios from 'axios'\r\nimport {getProducttoCart} from './cartAction'\r\n\r\nexport const setOrderSummary = (orders) =>{\r\n    return {type: 'SET_ORDERS' ,  payload:orders}\r\n}\r\nexport const getOrderSummary =()=>{\r\n    return(dispatch) => {\r\n        axios.get('/orders' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => { \r\n             if(response.data.hasOwnProperty('error')){\r\n                alert(response.data.error)\r\n             }           \r\n            else{\r\n                dispatch( setOrderSummary(response.data) )\r\n            }\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\nexport const addOrderInfo = (order) =>{\r\n    return {type: 'CREATE_ORDER' ,  payload:order}\r\n}\r\n\r\nexport const addProductstoOrder = (formData , refresh) =>{\r\n    return(dispatch) => {     \r\n            \r\n        axios.delete(`/cart/delete/all`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {                  \r\n                dispatch(getProducttoCart())               \r\n                console.log()\r\n                axios.post('/orders',formData,{  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                     }\r\n                    })\r\n                \r\n                    .then(response =>{\r\n                        if( response.data.hasOwnProperty('error')){\r\n                            alert (response.data)\r\n                        } else {\r\n                             dispatch ( addOrderInfo(response.data) )\r\n                             refresh()\r\n                        }\r\n\r\n                    })\r\n                    .catch(err =>{\r\n                        console.log(err)\r\n                    })\r\n                \r\n              }\r\n            })\r\n            \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }        \r\n}"]},"metadata":{},"sourceType":"module"}