{"ast":null,"code":"import axios from 'axios';\nexport const addCartInfo = cart => {\n  return {\n    type: 'CREATE_CART',\n    payload: cart\n  };\n};\nexport const addProducttoCart = (formdata, redirect) => {\n  return dispatch => {\n    const product = {\n      productQuantity: -1,\n      cartQuantity: 1,\n      currentQuantity: 1,\n      id: formdata.productID\n    };\n    axios.put('/products/quantity/update', product).then(response => {\n      console.log(response.data);\n\n      if (response.data.hasOwnProperty('message')) {\n        alert(response.data.message);\n      } else if (response.data.hasOwnProperty('error')) {\n        alert(response.data.error);\n      } else {\n        axios.post('/cart', formdata, {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          dispatch(addCartInfo(response.data));\n          redirect();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const getProducttoCart = () => {\n  return dispatch => {\n    axios.get('/cart', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      dispatch(addCartInfo(response.data));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const UpdateCartInfo = cart => {\n  return {\n    type: 'EDIT_CART',\n    payload: cart\n  };\n};\nexport const updateCartQuantity = (formData, refresh) => {\n  return dispatch => {\n    axios.put('products/quantity/update', formData).then(response => {\n      if (response.data.hasOwnProperty('message')) {\n        alert(response.data.message);\n      } else if (response.data.hasOwnProperty('error')) {\n        alert(response.data.error);\n      } else {\n        axios.put('/cart/qunatity/update', formData, {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          dispatch(UpdateCartInfo(response.data));\n          refresh();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const deleteProducttoCart = (id, refresh) => {\n  return dispatch => {\n    axios.delete(`/cart/${id}`, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data);\n      } else {\n        dispatch(getProducttoCart());\n        refresh();\n        const product = {\n          productQuantity: response.data.quantity,\n          cartQuantity: -1,\n          currentQuantity: response.data.quantity,\n          id: response.data.productID\n        };\n        axios.put('/products/quantity/update', product).then(response => {\n          if (response.data.hasOwnProperty('message')) {\n            alert(response.data.message);\n          } else if (response.data.hasOwnProperty('error')) {\n            alert(response.data.error);\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const addProductstoOrder = (formData, refresh) => {\n  return dispatch => {\n    axios.delete(`cart/delete/all`, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data);\n      } else {\n        dispatch(getProducttoCart());\n        refresh();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/cartAction.js"],"names":["axios","addCartInfo","cart","type","payload","addProducttoCart","formdata","redirect","dispatch","product","productQuantity","cartQuantity","currentQuantity","id","productID","put","then","response","console","log","data","hasOwnProperty","alert","message","error","post","headers","localStorage","getItem","catch","err","getProducttoCart","get","UpdateCartInfo","updateCartQuantity","formData","refresh","deleteProducttoCart","delete","quantity","addProductstoOrder"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nexport const addCartInfo = (cart) =>{\r\n    return {type: 'CREATE_CART' ,  payload:cart}\r\n}\r\n\r\nexport const addProducttoCart = (formdata,redirect)=>{\r\n    return(dispatch) => {\r\n         \r\n         const product = {\r\n            productQuantity : -1,\r\n            cartQuantity : 1,\r\n            currentQuantity : 1,\r\n            id : formdata.productID\r\n         }\r\n        axios.put('/products/quantity/update',product)\r\n        .then( response =>{\r\n            console.log(response.data)\r\n            if(response.data.hasOwnProperty('message')) {\r\n                alert(response.data.message)\r\n            } else if(response.data.hasOwnProperty('error') ){\r\n                alert(response.data.error)\r\n            } else { \r\n            \r\n                axios.post('/cart', formdata,{  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                    }\r\n                    })\r\n                .then(response => {  \r\n                    dispatch( addCartInfo(response.data) )\r\n                    redirect()\r\n                })\r\n                .catch(err =>{\r\n                    console.log(err)\r\n                })    \r\n            } \r\n        }) \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })      \r\n    }\r\n}\r\n\r\nexport const getProducttoCart = ()=>{\r\n    return(dispatch) => {\r\n         \r\n        axios.get('/cart', {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n             dispatch( addCartInfo(response.data) )\r\n              \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\nexport const UpdateCartInfo = (cart) =>{\r\n    return {type: 'EDIT_CART' ,  payload:cart}\r\n}\r\n\r\n\r\nexport const updateCartQuantity = (formData,refresh) =>{\r\n    return(dispatch) =>{\r\n      \r\n        axios.put('products/quantity/update',formData)\r\n        .then( response =>{\r\n            if(response.data.hasOwnProperty('message')) {\r\n                alert(response.data.message)\r\n            } else if(response.data.hasOwnProperty('error') ){\r\n                alert(response.data.error)\r\n            } else { \r\n                axios.put('/cart/qunatity/update',formData , {  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                     }\r\n                    })\r\n                 .then( response =>{\r\n                     dispatch(UpdateCartInfo(response.data))\r\n                     refresh()\r\n                 })   \r\n\r\n                 .catch(err=> {\r\n                     console.log(err)\r\n                 })\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const deleteProducttoCart = (id,refresh)=>{\r\n    \r\n    return(dispatch) => {         \r\n        axios.delete(`/cart/${id}`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {\r\n                dispatch(getProducttoCart())\r\n                refresh()\r\n                const product = {\r\n                    productQuantity : response.data.quantity,\r\n                    cartQuantity : -1,\r\n                    currentQuantity : response.data.quantity,\r\n                    id : response.data.productID\r\n                 }\r\n                axios.put('/products/quantity/update',product)\r\n                .then( response =>{\r\n                  \r\n                    if(response.data.hasOwnProperty('message')) {\r\n                        alert(response.data.message)\r\n                    } else if(response.data.hasOwnProperty('error') ){\r\n                        alert(response.data.error)\r\n                    }  \r\n                })\r\n                .catch(err=>{\r\n                    console.log(err)\r\n                })\r\n              }\r\n            \r\n              \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\nexport const addProductstoOrder = (formData , refresh) =>{\r\n    return(dispatch) => {         \r\n        axios.delete(`cart/delete/all`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {\r\n                 \r\n                dispatch(getProducttoCart())\r\n                refresh()\r\n\r\n                \r\n                \r\n              }\r\n            })\r\n            \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }        \r\n}"]},"metadata":{},"sourceType":"module"}