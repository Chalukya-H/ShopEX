{"ast":null,"code":"import axios from 'axios';\nimport swal from 'sweetalert';\nexport const setUserInfo = user => {\n  return {\n    type: 'SET_USER',\n    payload: user\n  };\n};\nexport const stratLogin = (userData, redirect, refresh) => {\n  return dispatch => {\n    axios.post('/users/login', userData).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        swal({\n          title: response.data.error,\n          icon: \"error\",\n          button: 'OK'\n        });\n      } else {\n        localStorage.setItem('token', response.data.token);\n        axios.get('users/account', {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          dispatch(setUserInfo(response.data));\n          swal({\n            title: 'Login Successfull !',\n            icon: \"success\",\n            button: 'OK'\n          }).then(() => {\n            redirect();\n            refresh();\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startRegister = (userData, redirect) => {\n  return dispatch => {\n    axios.post('/users/register', userData).then(response => {\n      if (response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\n        alert(response.data.error);\n        redirect();\n      } else {\n        alert('Registered Successfully');\n        redirect();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const startGetUser = () => {\n  return dispatch => {\n    axios.get('/users/account', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      dispatch(setUserInfo(response.data));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const editUser = user => {\n  return {\n    type: 'EDIT_USER',\n    payload: user\n  };\n};\nexport const EditUserInfo = (userData, id, refresh) => {\n  console.log('Edit', userData, id);\n  return dispatch => {\n    axios.put(`/users/${id}`, userData, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      console.log(response.data);\n\n      if (response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\n        alert('Customer Data not Updated !');\n      } else {\n        const user = response.data;\n        dispatch(editUser(user));\n        refresh();\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/userAction.js"],"names":["axios","swal","setUserInfo","user","type","payload","stratLogin","userData","redirect","refresh","dispatch","post","then","response","data","hasOwnProperty","title","error","icon","button","localStorage","setItem","token","get","headers","getItem","catch","err","console","log","startRegister","alert","startGetUser","editUser","EditUserInfo","id","put"],"mappings":"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","sourcesContent":["import axios from 'axios'   \r\nimport swal from 'sweetalert'\r\n\r\nexport const setUserInfo = (user) =>{\r\n    return {type: 'SET_USER' ,  payload:user}\r\n}\r\n\r\nexport const stratLogin = (userData,redirect,refresh) =>{\r\n   \r\n    return(dispatch) => {\r\n        axios.post('/users/login',userData)\r\n        .then(response => {\r\n            if(response.data.hasOwnProperty('error')){                \r\n                \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\" ,\r\n                    button :'OK'                   \r\n                  })\r\n             } else {\r\n                 localStorage.setItem('token',response.data.token)\r\n                  \r\n                 axios.get('users/account',{headers :{\r\n                     'auth':localStorage.getItem('token')\r\n                    }\r\n                 })\r\n\r\n                 .then(response =>{\r\n                     dispatch(setUserInfo(response.data))\r\n                     swal({\r\n                        title: 'Login Successfull !',                    \r\n                        icon: \"success\",\r\n                        button :'OK'                     \r\n                      }).then( ()=>{\r\n                        redirect()\r\n                        refresh()\r\n                      }) \r\n\r\n                    \r\n                 })\r\n\r\n                 .catch(err=>{\r\n                     console.log(err)\r\n                 })\r\n                  \r\n\r\n             }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const startRegister = (userData,redirect) =>{\r\n\r\n    return(dispatch) =>{\r\n        axios.post('/users/register',userData)\r\n        .then( response =>{\r\n            \r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')){                 \r\n                alert(response.data.error)\r\n                redirect()\r\n            }\r\n            else {\r\n                alert('Registered Successfully')\r\n                redirect()\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n \r\nexport const startGetUser =() =>{\r\n    return(dispatch) => {\r\n        axios.get('/users/account' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => {            \r\n             dispatch( setUserInfo(response.data) )\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\nexport const editUser = (user) => {\r\n    return {   type: 'EDIT_USER',   payload: user   }\r\n}\r\n\r\nexport const EditUserInfo = (userData,id,refresh) =>{\r\n    console.log('Edit',userData,id)\r\n    return(dispatch) =>{\r\n        axios.put(`/users/${id}`,userData,{\r\n            headers : {\r\n                'auth' : localStorage.getItem('token') \r\n                 }\r\n        })\r\n\r\n        .then( response =>{\r\n            console.log(response.data)\r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\r\n                alert('Customer Data not Updated !')\r\n            } else {\r\n                const user = response.data\r\n                dispatch(editUser(user))\r\n                refresh()        \r\n            }\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}