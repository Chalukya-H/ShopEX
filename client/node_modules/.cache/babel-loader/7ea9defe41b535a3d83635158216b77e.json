{"ast":null,"code":"import axios from'./axios';export var addCartInfo=function addCartInfo(cart){return{type:'CREATE_CART',payload:cart};};export var addProducttoCart=function addProducttoCart(formdata,redirect){return function(dispatch){var product={productQuantity:-1,cartQuantity:1,currentQuantity:1,id:formdata.productID};axios.put('/products/quantity/update',product).then(function(response){console.log(response.data);if(response.data.hasOwnProperty('message')){alert(response.data.message);}else if(response.data.hasOwnProperty('error')){alert(response.data.error);}else{axios.post('/cart',formdata,{headers:{'auth':localStorage.getItem('token')}}).then(function(response){dispatch(addCartInfo(response.data));redirect();}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);});};};export var getProducttoCart=function getProducttoCart(){return function(dispatch){axios.get('/cart',{headers:{'auth':localStorage.getItem('token')}}).then(function(response){dispatch(addCartInfo(response.data));}).catch(function(err){console.log(err);});};};export var UpdateCartInfo=function UpdateCartInfo(cart){return{type:'EDIT_CART',payload:cart};};export var updateCartQuantity=function updateCartQuantity(formData,refresh){return function(dispatch){axios.put('products/quantity/update',formData).then(function(response){if(response.data.hasOwnProperty('message')){alert(response.data.message);}else if(response.data.hasOwnProperty('error')){alert(response.data.error);}else{axios.put('/cart/qunatity/update',formData,{headers:{'auth':localStorage.getItem('token')}}).then(function(response){dispatch(UpdateCartInfo(response.data));refresh();}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);});};};export var deleteProducttoCart=function deleteProducttoCart(id,refresh){return function(dispatch){axios.delete(\"/cart/\".concat(id),{headers:{'auth':localStorage.getItem('token')}}).then(function(response){if(response.data.hasOwnProperty('error')){alert(response.data);}else{dispatch(getProducttoCart());refresh();var product={productQuantity:response.data.quantity,cartQuantity:-1,currentQuantity:response.data.quantity,id:response.data.productID};axios.put('/products/quantity/update',product).then(function(response){if(response.data.hasOwnProperty('message')){alert(response.data.message);}else if(response.data.hasOwnProperty('error')){alert(response.data.error);}}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);});};};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/cartAction.js"],"names":["axios","addCartInfo","cart","type","payload","addProducttoCart","formdata","redirect","dispatch","product","productQuantity","cartQuantity","currentQuantity","id","productID","put","then","response","console","log","data","hasOwnProperty","alert","message","error","post","headers","localStorage","getItem","catch","err","getProducttoCart","get","UpdateCartInfo","updateCartQuantity","formData","refresh","deleteProducttoCart","delete","quantity"],"mappings":"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","sourcesContent":["import axios from './axios'\r\n\r\nexport const addCartInfo = (cart) =>{\r\n    return {type: 'CREATE_CART' ,  payload:cart}\r\n}\r\n\r\nexport const addProducttoCart = (formdata,redirect)=>{\r\n    return(dispatch) => {\r\n         \r\n         const product = {\r\n            productQuantity : -1,\r\n            cartQuantity : 1,\r\n            currentQuantity : 1,\r\n            id : formdata.productID\r\n         }\r\n        axios.put('/products/quantity/update',product)\r\n        .then( response =>{\r\n            console.log(response.data)\r\n            if(response.data.hasOwnProperty('message')) {\r\n                alert(response.data.message)\r\n            } else if(response.data.hasOwnProperty('error') ){\r\n                alert(response.data.error)\r\n            } else { \r\n            \r\n                axios.post('/cart', formdata,{  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                    }\r\n                    })\r\n                .then(response => {  \r\n                    dispatch( addCartInfo(response.data) )\r\n                    redirect()\r\n                })\r\n                .catch(err =>{\r\n                    console.log(err)\r\n                })    \r\n            } \r\n        }) \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })      \r\n    }\r\n}\r\n\r\nexport const getProducttoCart = ()=>{\r\n    return(dispatch) => {\r\n         \r\n        axios.get('/cart', {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n             dispatch( addCartInfo(response.data) )\r\n              \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\nexport const UpdateCartInfo = (cart) =>{\r\n    return {type: 'EDIT_CART' ,  payload:cart}\r\n}\r\n\r\n\r\nexport const updateCartQuantity = (formData,refresh) =>{\r\n    return(dispatch) =>{\r\n      \r\n        axios.put('products/quantity/update',formData)\r\n        .then( response =>{\r\n            if(response.data.hasOwnProperty('message')) {\r\n                alert(response.data.message)\r\n            } else if(response.data.hasOwnProperty('error') ){\r\n                alert(response.data.error)\r\n            } else { \r\n                axios.put('/cart/qunatity/update',formData , {  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                     }\r\n                    })\r\n                 .then( response =>{\r\n                     dispatch(UpdateCartInfo(response.data))\r\n                     refresh()\r\n                 })   \r\n\r\n                 .catch(err=> {\r\n                     console.log(err)\r\n                 })\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const deleteProducttoCart = (id,refresh)=>{\r\n    \r\n    return(dispatch) => {         \r\n        axios.delete(`/cart/${id}`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {\r\n                dispatch(getProducttoCart())\r\n                refresh()\r\n                const product = {\r\n                    productQuantity : response.data.quantity,\r\n                    cartQuantity : -1,\r\n                    currentQuantity : response.data.quantity,\r\n                    id : response.data.productID\r\n                 }\r\n                axios.put('/products/quantity/update',product)\r\n                .then( response =>{\r\n                  \r\n                    if(response.data.hasOwnProperty('message')) {\r\n                        alert(response.data.message)\r\n                    } else if(response.data.hasOwnProperty('error') ){\r\n                        alert(response.data.error)\r\n                    }  \r\n                })\r\n                .catch(err=>{\r\n                    console.log(err)\r\n                })\r\n              }\r\n            \r\n              \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}