{"ast":null,"code":"import axios from 'axios';\nimport swal from 'sweetalert';\nimport { getProducttoCart } from './cartAction';\nexport const setOrderSummary = orders => {\n  return {\n    type: 'SET_ORDERS',\n    payload: orders\n  };\n};\nexport const getOrderSummary = () => {\n  return dispatch => {\n    axios.get('/orders', {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        swal({\n          title: response.data.error,\n          icon: \"error\",\n          button: 'OK'\n        }).then(() => {\n          window.location.href = '/';\n        });\n      } else {\n        dispatch(setOrderSummary(response.data));\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const addOrderInfo = order => {\n  return {\n    type: 'CREATE_ORDER',\n    payload: order\n  };\n};\nexport const addProductstoOrder = (formData, refresh) => {\n  return dispatch => {\n    axios.delete(`/cart/delete/all`, {\n      headers: {\n        'auth': localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.data.hasOwnProperty('error')) {\n        alert(response.data);\n      } else {\n        dispatch(getProducttoCart());\n        console.log();\n        axios.post('/orders', formData, {\n          headers: {\n            'auth': localStorage.getItem('token')\n          }\n        }).then(response => {\n          if (response.data.hasOwnProperty('error')) {\n            alert(response.data);\n          } else {\n            dispatch(addOrderInfo(response.data));\n            refresh();\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/orderAction.js"],"names":["axios","swal","getProducttoCart","setOrderSummary","orders","type","payload","getOrderSummary","dispatch","get","headers","localStorage","getItem","then","response","data","hasOwnProperty","title","error","icon","button","window","location","href","catch","err","console","log","addOrderInfo","order","addProductstoOrder","formData","refresh","delete","alert","post"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport swal from 'sweetalert'\r\nimport {getProducttoCart} from './cartAction'\r\n\r\nexport const setOrderSummary = (orders) =>{\r\n    return {type: 'SET_ORDERS' ,  payload:orders}\r\n}\r\nexport const getOrderSummary =()=>{\r\n    return(dispatch) => {\r\n        axios.get('/orders' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => { \r\n             if(response.data.hasOwnProperty('error')){\r\n                 \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\" ,\r\n                    button :'OK'                   \r\n                  }).then( ()=>{\r\n                      window.location.href='/'\r\n                  }) \r\n                   \r\n                \r\n                \r\n             }           \r\n            else{\r\n                dispatch( setOrderSummary(response.data) )\r\n            }\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\nexport const addOrderInfo = (order) =>{\r\n    return {type: 'CREATE_ORDER' ,  payload:order}\r\n}\r\n\r\nexport const addProductstoOrder = (formData , refresh) =>{\r\n    return(dispatch) => {     \r\n            \r\n        axios.delete(`/cart/delete/all`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {                  \r\n                dispatch(getProducttoCart())               \r\n                console.log()\r\n                axios.post('/orders',formData,{  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                     }\r\n                    })\r\n                \r\n                    .then(response =>{\r\n                        if( response.data.hasOwnProperty('error')){\r\n                            alert (response.data)\r\n                        } else {\r\n                             dispatch ( addOrderInfo(response.data) )\r\n                             refresh()\r\n                        }\r\n\r\n                    })\r\n                    .catch(err =>{\r\n                        console.log(err)\r\n                    })\r\n                \r\n              }\r\n            })\r\n            \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }        \r\n}"]},"metadata":{},"sourceType":"module"}