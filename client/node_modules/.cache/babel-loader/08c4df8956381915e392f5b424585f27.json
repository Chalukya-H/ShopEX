{"ast":null,"code":"import axios from'./axios';import swal from'sweetalert';import{getProducttoCart}from'./cartAction';export var setOrderSummary=function setOrderSummary(orders){return{type:'SET_ORDERS',payload:orders};};export var getOrderSummary=function getOrderSummary(){return function(dispatch){axios.get('/orders',{headers:{'auth':localStorage.getItem('token')}}).then(function(response){if(response.data.hasOwnProperty('error')){swal({title:response.data.error,icon:\"error\",button:'OK'}).then(function(){window.location.href='/';});}else{dispatch(setOrderSummary(response.data));}}).catch(function(err){console.log(err);});};};export var getOrdersDetails=function getOrdersDetails(){return function(dispatch){axios.get('/orders/list',{headers:{'auth':localStorage.getItem('token')}}).then(function(response){if(response.data.hasOwnProperty('error')){swal({title:response.data.error,icon:\"error\",button:'OK'}).then(function(){window.location.href='/';});}else{dispatch(setOrderSummary(response.data));}}).catch(function(err){console.log(err);});};};export var addOrderInfo=function addOrderInfo(order){return{type:'CREATE_ORDER',payload:order};};export var addProductstoOrder=function addProductstoOrder(formData,refresh){return function(dispatch){axios.delete(\"/cart/delete/all\",{headers:{'auth':localStorage.getItem('token')}}).then(function(response){if(response.data.hasOwnProperty('error')){alert(response.data);}else{dispatch(getProducttoCart());console.log();axios.post('/orders',formData,{headers:{'auth':localStorage.getItem('token')}}).then(function(response){if(response.data.hasOwnProperty('error')){alert(response.data);}else{dispatch(addOrderInfo(response.data));refresh();}}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);});};};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/orderAction.js"],"names":["axios","swal","getProducttoCart","setOrderSummary","orders","type","payload","getOrderSummary","dispatch","get","headers","localStorage","getItem","then","response","data","hasOwnProperty","title","error","icon","button","window","location","href","catch","err","console","log","getOrdersDetails","addOrderInfo","order","addProductstoOrder","formData","refresh","delete","alert","post"],"mappings":"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","sourcesContent":["import axios from './axios'\r\nimport swal from 'sweetalert'\r\nimport {getProducttoCart} from './cartAction'\r\n\r\nexport const setOrderSummary = (orders) =>{\r\n    return {type: 'SET_ORDERS' ,  payload:orders}\r\n}\r\nexport const getOrderSummary =()=>{\r\n    return(dispatch) => {\r\n        axios.get('/orders' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => { \r\n             if(response.data.hasOwnProperty('error')){\r\n                 \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\" ,\r\n                    button :'OK'                   \r\n                  }).then( ()=>{\r\n                      window.location.href='/'\r\n                  }) \r\n                   \r\n                \r\n                \r\n             }           \r\n            else{\r\n                dispatch( setOrderSummary(response.data) )\r\n            }\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\nexport const getOrdersDetails =()=>{\r\n    return(dispatch) => {\r\n        axios.get('/orders/list' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => { \r\n             if(response.data.hasOwnProperty('error')){                 \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\" ,\r\n                    button :'OK'                   \r\n                  }).then( ()=>{\r\n                      window.location.href='/'\r\n                  })  \r\n             }           \r\n            else{\r\n                dispatch( setOrderSummary(response.data) )\r\n            }\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\n\r\nexport const addOrderInfo = (order) =>{\r\n    return {type: 'CREATE_ORDER' ,  payload:order}\r\n}\r\n\r\nexport const addProductstoOrder = (formData , refresh) =>{\r\n    return(dispatch) => {     \r\n            \r\n        axios.delete(`/cart/delete/all`, {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n            })\r\n         .then(response => {  \r\n              if( response.data.hasOwnProperty('error')){\r\n                  alert (response.data)\r\n              } else {                  \r\n                dispatch(getProducttoCart())               \r\n                console.log()\r\n                axios.post('/orders',formData,{  headers : {\r\n                    'auth' : localStorage.getItem('token') \r\n                     }\r\n                    })\r\n                \r\n                    .then(response =>{\r\n                        if( response.data.hasOwnProperty('error')){\r\n                            alert (response.data)\r\n                        } else {\r\n                             dispatch ( addOrderInfo(response.data) )\r\n                             refresh()\r\n                        }\r\n\r\n                    })\r\n                    .catch(err =>{\r\n                        console.log(err)\r\n                    })\r\n                \r\n              }\r\n            })\r\n            \r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }        \r\n}"]},"metadata":{},"sourceType":"module"}