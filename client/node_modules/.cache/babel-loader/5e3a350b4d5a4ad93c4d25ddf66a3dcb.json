{"ast":null,"code":"import axios from'./axios';import swal from'sweetalert';export var setUserInfo=function setUserInfo(user){return{type:'SET_USER',payload:user};};export var stratLogin=function stratLogin(userData,redirect,refresh){return function(dispatch){axios.post('/users/login',userData).then(function(response){if(response.data.hasOwnProperty('error')){swal({title:response.data.error,icon:\"error\",button:'OK'});}else{localStorage.setItem('token',response.data.token);axios.get('users/account',{headers:{'auth':localStorage.getItem('token')}}).then(function(response){dispatch(setUserInfo(response.data));swal({title:'Login Successfull !',icon:\"success\",button:'OK'}).then(function(){redirect();refresh();});}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);});};};export var startRegister=function startRegister(userData,redirect){return function(dispatch){axios.post('/users/register',userData).then(function(response){if(response.data.hasOwnProperty('error')||response.data.hasOwnProperty('errors')){alert(response.data.error);redirect();}else{alert('Registered Successfully');redirect();}}).catch(function(err){console.log(err);});};};export var startGetUser=function startGetUser(){return function(dispatch){axios.get('/users/account',{headers:{'auth':localStorage.getItem('token')}}).then(function(response){dispatch(setUserInfo(response.data));}).catch(function(err){console.log(err);});};};export var editUser=function editUser(user){return{type:'EDIT_USER',payload:user};};export var EditUserInfo=function EditUserInfo(userData,id,refresh){console.log('Edit',userData,id);return function(dispatch){axios.put(\"/users/\".concat(id),userData,{headers:{'auth':localStorage.getItem('token')}}).then(function(response){console.log(response.data);if(response.data.hasOwnProperty('error')||response.data.hasOwnProperty('errors')){alert('Customer Data not Updated !');}else{var user=response.data;dispatch(editUser(user));refresh();}});};};","map":{"version":3,"sources":["D:/Jan2020_Devlopment/Main projects/ShopEx/client/src/actions/userAction.js"],"names":["axios","swal","setUserInfo","user","type","payload","stratLogin","userData","redirect","refresh","dispatch","post","then","response","data","hasOwnProperty","title","error","icon","button","localStorage","setItem","token","get","headers","getItem","catch","err","console","log","startRegister","alert","startGetUser","editUser","EditUserInfo","id","put"],"mappings":"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","sourcesContent":["import axios from './axios'   \r\nimport swal from 'sweetalert'\r\n\r\nexport const setUserInfo = (user) =>{\r\n    return {type: 'SET_USER' ,  payload:user}\r\n}\r\n\r\nexport const stratLogin = (userData,redirect,refresh) =>{\r\n   \r\n    return(dispatch) => {\r\n        axios.post('/users/login',userData)\r\n        .then(response => {\r\n            if(response.data.hasOwnProperty('error')){                \r\n                \r\n                swal({\r\n                    title: response.data.error,                     \r\n                    icon: \"error\" ,\r\n                    button :'OK'                   \r\n                  })\r\n             } else {\r\n                 localStorage.setItem('token',response.data.token)\r\n                  \r\n                 axios.get('users/account',{headers :{\r\n                     'auth':localStorage.getItem('token')\r\n                    }\r\n                 })\r\n\r\n                 .then(response =>{\r\n                     dispatch(setUserInfo(response.data))\r\n                     swal({\r\n                        title: 'Login Successfull !',                    \r\n                        icon: \"success\",\r\n                        button :'OK'                     \r\n                      }).then( ()=>{\r\n                        redirect()\r\n                        refresh()\r\n                      }) \r\n\r\n                    \r\n                 })\r\n\r\n                 .catch(err=>{\r\n                     console.log(err)\r\n                 })\r\n                  \r\n\r\n             }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const startRegister = (userData,redirect) =>{\r\n\r\n    return(dispatch) =>{\r\n        axios.post('/users/register',userData)\r\n        .then( response =>{\r\n            \r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')){                 \r\n                alert(response.data.error)\r\n                redirect()\r\n            }\r\n            else {\r\n                alert('Registered Successfully')\r\n                redirect()\r\n            }\r\n        })\r\n\r\n        .catch(err =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n\r\n \r\nexport const startGetUser =() =>{\r\n    return(dispatch) => {\r\n        axios.get('/users/account' , {  headers : {\r\n            'auth' : localStorage.getItem('token') \r\n             }\r\n        })\r\n\r\n         .then(response => {            \r\n             dispatch( setUserInfo(response.data) )\r\n             \r\n         })\r\n         .catch(err =>{\r\n             console.log(err)\r\n         })         \r\n    }\r\n}\r\n\r\n\r\nexport const editUser = (user) => {\r\n    return {   type: 'EDIT_USER',   payload: user   }\r\n}\r\n\r\nexport const EditUserInfo = (userData,id,refresh) =>{\r\n    console.log('Edit',userData,id)\r\n    return(dispatch) =>{\r\n        axios.put(`/users/${id}`,userData,{\r\n            headers : {\r\n                'auth' : localStorage.getItem('token') \r\n                 }\r\n        })\r\n\r\n        .then( response =>{\r\n            console.log(response.data)\r\n            if(response.data.hasOwnProperty('error') || response.data.hasOwnProperty('errors')) {\r\n                alert('Customer Data not Updated !')\r\n            } else {\r\n                const user = response.data\r\n                dispatch(editUser(user))\r\n                refresh()        \r\n            }\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}